name: "Full Feature Scenario"
description: "Tests all supported features including captures and assertions"

settings:
  threads: 10
  rampup: 5
  duration: 60
  base_url: "http://localhost:8080"

variables:
  api_version: "v1"
  default_password: "SecurePass123!"
  admin_email: "admin@example.com"

scenario:
  - name: "Create User"
    endpoint: "createUser"
    headers:
      X-API-Version: "${api_version}"
    payload:
      email: "test.user@example.com"
      firstName: "Test"
      lastName: "User"
      password: "${default_password}"
    capture:
      - userId
      - email
    assert:
      status: 201
      body:
        firstName: "Test"

  - name: "Get Created User"
    endpoint: "GET /users/{userId}"
    params:
      userId: "${userId}"
    assert:
      status: 200
      body:
        email: "test.user@example.com"

  - name: "Update User"
    endpoint: "PUT /users/{userId}"
    params:
      userId: "${userId}"
    payload:
      firstName: "Updated"
      lastName: "Name"
    capture:
      - updatedAt: "updated_at"
    assert:
      status: 200

  - name: "Delete User"
    endpoint: "DELETE /users/{userId}"
    params:
      userId: "${userId}"
    assert:
      status: 200

  - name: "Verify Deletion"
    endpoint: "GET /users/{userId}"
    params:
      userId: "${userId}"
    assert:
      status: 404
