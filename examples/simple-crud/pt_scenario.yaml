name: "User CRUD Flow"
description: "Complete user lifecycle: create, read, update, delete"

settings:
  threads: 1
  rampup: 0
  base_url: "http://localhost:8080"

variables:
  test_email: "testuser@example.com"
  test_password: "SecurePass123"

scenario:
  - name: "Create new user"
    endpoint: "createUser"
    payload:
      email: "${test_email}"
      firstName: "Test"
      lastName: "User"
      password: "${test_password}"
    capture:
      - userId: "id"
    assert:
      status: 201

  - name: "Get user by ID"
    endpoint: "getUser"
    params:
      userId: "${userId}"
    assert:
      status: 200
      body:
        firstName: "Test"

  - name: "Update user"
    endpoint: "updateUser"
    params:
      userId: "${userId}"
    payload:
      firstName: "Updated"
      lastName: "Name"
    assert:
      status: 200

  - name: "Get user profile"
    endpoint: "getUserProfile"
    params:
      userId: "${userId}"
    assert:
      status: 200

  - name: "List all users"
    endpoint: "listUsers"
    assert:
      status: 200

  - name: "Delete user"
    endpoint: "deleteUser"
    params:
      userId: "${userId}"
    assert:
      status: 200
